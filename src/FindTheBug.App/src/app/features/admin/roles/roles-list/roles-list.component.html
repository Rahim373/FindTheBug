<div class="page-container">
  <div class="page-header">
    <h2>Roles Management</h2>
    <button nz-button nzType="primary" (click)="createRole()">
      <span nz-icon nzType="plus"></span>
      New Role
    </button>
  </div>

  <div class="search-bar">
    <nz-input-group [nzSuffix]="suffixIconSearch">
      <input
        type="text"
        nz-input
        placeholder="Search roles..."
        [(ngModel)]="searchValue"
        (keyup.enter)="onSearch()"
      />
    </nz-input-group>
    <ng-template #suffixIconSearch>
      <span nz-icon nzType="search"></span>
    </ng-template>
  </div>

  <nz-table
    #rolesTable
    [nzData]="roles"
    [nzLoading]="loading"
    [nzTotal]="total"
    [nzPageIndex]="pageIndex"
    [nzPageSize]="pageSize"
    [nzFrontPagination]="false"
    (nzPageIndexChange)="onPageChange($event)"
  >
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Status</th>
        <th>Type</th>
        <th>Created</th>
        <th nzWidth="150px">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let role of rolesTable.data">
        <td>{{ role.name }}</td>
        <td>{{ role.description || '-' }}</td>
        <td>
          <nz-tag [nzColor]="role.isActive ? 'success' : 'default'">
            {{ role.isActive ? 'Active' : 'Inactive' }}
          </nz-tag>
        </td>
        <td>
          <nz-tag *ngIf="role.isSystemRole" nzColor="blue">System</nz-tag>
          <nz-tag *ngIf="!role.isSystemRole" nzColor="default">Custom</nz-tag>
        </td>
        <td>{{ role.createdAt | date: 'short' }}</td>
        <td>
          <button
            nz-button
            nzType="link"
            nzSize="small"
            (click)="editRole(role.id)"
            [disabled]="role.isSystemRole"
          >
            <span nz-icon nzType="edit"></span>
          </button>
          <button
            nz-button
            nzType="link"
            nzSize="small"
            nzDanger
            (click)="deleteRole(role)"
            [disabled]="role.isSystemRole"
          >
            <span nz-icon nzType="delete"></span>
          </button>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>
